import{S as n,d as v,w,b,c as y,e as g}from"./api-F9C-BKG7.js";import{u as A,c as o,d as m,e as a,t as S,r as f,o as k,F as h,h as T,s as I}from"./index-CMPOgCmU.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./axios-Bo0ATomq.js";const N={class:"article-item card p-0"},D={class:"row"},E={class:"col-md-8"},P={class:"card-body"},$={class:"card-text"},_="/v1/articleclasses",z={__name:"ArticleClassItem",props:["articleClass"],emits:["deleteArticleClass","updateArticleClass"],setup(u,{emit:i}){const l=A(),c=u,r=i,d=()=>{n.fire({title:"分類名稱",input:"text",inputAttributes:{autocapitalize:"off"},inputValue:c.articleClass.articleClassName,showCancelButton:!0,confirmButtonText:"儲存",cancelButtonText:"取消"}).then(async t=>{if(t.isConfirmed){const e=t.value,s=f({articleClassId:c.articleClass.articleClassId,articleClassName:e});try{console.log(s),(await v(_,s.value,l)).status==200&&n.fire({title:"修改成功",icon:"success",confirmButtonText:"確定"}).then(()=>{r("updateArticleClass")})}catch(p){w(p,l)}}})},C=()=>{n.fire({title:"刪除?",text:"確定要刪除這篇文章嗎?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定",cancelButtonText:"取消"}).then(async t=>{if(t.isConfirmed){const e=await b(`${_}/${c.articleClass.articleClassId}`,l);(e==null?void 0:e.status)==204&&n.fire({title:"刪除!",text:"刪除成功",icon:"success"}).then(()=>{r("deleteArticleClass")})}})};return(t,e)=>(o(),m("div",N,[a("div",D,[a("div",E,[a("div",P,[a("p",$,S(u.articleClass.articleClassName),1)])]),a("div",{class:"col-md-3 d-flex justify-content-end align-items-center mt-2"},[a("button",{class:"btn btn-primary mx-2",onClick:d}," 修改 "),a("button",{class:"btn btn-danger mx-2",onClick:C},"刪除")])])]))}},F=V(z,[["__scopeId","data-v-3c9179c8"]]),x="/v1/articleclasses",H={__name:"ArticleClassesManagementView",setup(u){const i=f([]),l=A(),c=async()=>{const t=await y(x,l);i.value=t.data},r=()=>{c()},d=()=>{n.fire({title:"新增分類",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"新增",cancelButtonText:"取消"}).then(async t=>{if(t.isConfirmed){const e=t.value;if(!C(e))return;const s=f({articleClassName:e});(await g(x,s.value,l)).status==200&&n.fire({title:"新增成功",icon:"success",confirmButtonText:"確定"}).then(()=>{c()})}})};k(async()=>{c()});const C=t=>t.trim()?!0:(n.fire("錯誤","請填寫所有欄位","error"),!1);return(t,e)=>(o(),m(h,null,[a("button",{class:"btn btn-success",onClick:d},"新增分類"),(o(!0),m(h,null,T(i.value,s=>(o(),I(F,{key:s.articleClassId,articleClass:s,onDeleteArticleClass:r,onUpdateArticleClass:r},null,8,["articleClass"]))),128))],64))}};export{H as default};
